<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InfoHub OSINT</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            color: #00ff88;
            min-height: 100vh;
        }
        .header {
            background: linear-gradient(90deg, #16213e 0%, #0f3460 100%);
            border-bottom: 2px solid #00ff88;
            padding: 15px 0;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0,255,136,0.3);
        }
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #00ff88;
            text-shadow: 0 0 10px rgba(0,255,136,0.5);
        }
        .nav-menu {
            display: flex;
            gap: 20px;
        }
        .nav-item {
            color: #00d9ff;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }
        .nav-item:hover {
            background: rgba(0,255,136,0.2);
            border-color: #00ff88;
        }
        .main-container {
            margin-top: 80px;
            padding: 20px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            min-height: calc(100vh - 200px);
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        .card {
            background: linear-gradient(135deg, #16213e 0%, #1a1a2e 100%);
            border: 2px solid #00ff88;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,255,136,0.2);
            transition: all 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,255,136,0.4);
        }
        .card-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #00ff88;
            text-shadow: 0 0 5px rgba(0,255,136,0.3);
        }
        .search-section {
            grid-column: 1 / -1;
            text-align: center;
        }
        .search-container {
            display: flex;
            gap: 15px;
            max-width: 800px;
            margin: 0 auto;
        }
        .search-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #00d9ff;
            background: #0a0a0a;
            color: #00ff88;
            font-size: 16px;
            border-radius: 8px;
            outline: none;
        }
        .search-input:focus {
            border-color: #00ff88;
            box-shadow: 0 0 15px rgba(0,255,136,0.4);
        }
        .btn {
            background: linear-gradient(135deg, #00ff88 0%, #00d9ff 100%);
            color: #000;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,255,136,0.3);
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,255,136,0.5);
        }
        .scan-type {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }
        .scan-btn {
            background: rgba(0,217,255,0.2);
            color: #00d9ff;
            border: 1px solid #00d9ff;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .scan-btn:hover, .scan-btn.active {
            background: #00d9ff;
            color: #000;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .stat-card {
            background: rgba(0,255,136,0.1);
            border: 1px solid #00ff88;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: #00ff88;
            text-shadow: 0 0 10px rgba(0,255,136,0.5);
        }
        .stat-label {
            color: #888;
            margin-top: 5px;
        }
        .results-container {
            margin-top: 30px;
        }
        .result-item {
            background: linear-gradient(135deg, #16213e 0%, #1a1a2e 100%);
            border: 2px solid #00d9ff;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            transition: all 0.3s;
        }
        .result-item:hover {
            transform: translateX(10px);
            box-shadow: 0 4px 20px rgba(0,217,255,0.3);
        }
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .result-title {
            font-size: 18px;
            font-weight: bold;
            color: #00ff88;
        }
        .result-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        .status-success { background: #00ff88; color: #000; }
        .status-warning { background: #ffaa00; color: #000; }
        .status-error { background: #ff0055; color: #fff; }
        .result-data {
            color: #888;
            line-height: 1.6;
        }
        .loading {
            text-align: center;
            padding: 40px;
            color: #00d9ff;
        }
        .spinner {
            border: 3px solid rgba(0,217,255,0.3);
            border-top: 3px solid #00d9ff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .premium-banner {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 30px;
            grid-column: 1 / -1;
        }
        .premium-btn {
            background: white;
            color: #333;
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
        }
        .premium-btn:hover {
            transform: scale(1.05);
        }
        .about-section {
            display: none;
        }
        .about-section.active {
            display: block;
        }
        .footer {
            background: linear-gradient(90deg, #16213e 0%, #0f3460 100%);
            border-top: 2px solid #00ff88;
            padding: 30px 20px;
            margin-top: 50px;
            text-align: center;
        }
        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
        }
        .social-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        .social-link {
            color: #00ff88;
            text-decoration: none;
            font-size: 24px;
            transition: all 0.3s;
        }
        .social-link:hover {
            color: #00d9ff;
            transform: scale(1.2);
        }
        .footer-text {
            color: #888;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">InfoHub OSINT Pro v3.0</div>
            <nav class="nav-menu">
                <a id="navDashboard" class="nav-item">Dashboard</a>
                <a id="navAbout" class="nav-item">Sobre</a>
                <a id="navPremium" class="nav-item">Premium</a>
            </nav>
        </div>
    </header>

    <main class="main-container">
        <div id="dashboard" class="dashboard-view" style="display: block;">
            <div class="dashboard-grid">
                <div class="premium-banner">
                    <h3>üíé Upgrade para Premium - R$ 99,99/m√™s</h3>
                    <p>Dark Web ‚Ä¢ Breach Databases ‚Ä¢ Crypto Tracking ‚Ä¢ API Access ‚Ä¢ Real-time Monitoring</p>
                    <button class="premium-btn" onclick="showPremium()">Ver Detalhes</button>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="card search-section">
                    <div class="card-title">Intelligence Gathering</div>
                    <div class="search-container">
                        <input type="text" id="searchInput" class="search-input" placeholder="Enter target: username, email, domain, or phone">
                        <button onclick="startScan()" class="btn">Scan Target</button>
                    </div>
                    <div class="scan-type">
                        <button type="button" class="scan-btn active" data-type="auto">Auto</button>
                        <button type="button" class="scan-btn" data-type="social">Social Media</button>
                        <button type="button" class="scan-btn" data-type="email">Email</button>
                        <button type="button" class="scan-btn" data-type="phone">Phone</button>
                        <button type="button" class="scan-btn" data-type="domain">Domain</button>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-title">Scan Statistics</div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalScans">0</div>
                            <div class="stat-label">Total Scans</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="activeTargets">0</div>
                            <div class="stat-label">Active Targets</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="findings">0</div>
                            <div class="stat-label">Findings</div>
                        </div>
                    </div>
                    <div style="margin-top: 20px; text-align: center;">
                        <button id="clearHistoryBtn" class="scan-btn" style="margin: 5px;">üóëÔ∏è Limpar Hist√≥rico</button>
                        <button id="exportResultsBtn" class="scan-btn" style="margin: 5px;">üì• Exportar</button>
                    </div>
                </div>
            </div>

            <div class="results-container" id="resultsContainer" style="display: none;">
                <div class="card">
                    <div class="card-title">Scan Results</div>
                    <div id="scanResults"></div>
                </div>
            </div>
        </div>

        <div id="about" class="about-section" style="display: none;">
            <div class="card">
                <div class="card-title">Sobre InfoHub OSINT v3.0</div>
                <div class="result-data">
                    <p><strong>InfoHub OSINT Professional</strong> √© uma plataforma completa de intelig√™ncia de c√≥digo aberto (OSINT).</p>
                    <br>
                    <p><strong>Vers√£o:</strong> 3.0.0</p>
                    <p><strong>Recursos:</strong></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Busca em 20+ plataformas de redes sociais</li>
                        <li>An√°lise de email com verifica√ß√£o de breach</li>
                        <li>An√°lise de telefone e operadora</li>
                        <li>An√°lise de dom√≠nio e DNS</li>
                        <li>Rastreamento de criptomoedas</li>
                        <li>Monitoramento de dark web</li>
                        <li>API REST completa</li>
                        <li>Rate limiting e prote√ß√£o contra abuso</li>
                    </ul>
                    <br>
                    <p><strong>Desenvolvido por:</strong> InfoHub OSINT Team</p>
                    <p><strong>Licen√ßa:</strong> MIT</p>
                </div>
            </div>
        </div>

        <div id="premium" class="about-section" style="display: none;">
            <div class="card">
                <div class="card-title">Plano Premium - R$ 89,90/m√™s</div>
                <div class="result-data">
                    <p><strong>Recursos Premium:</strong></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>‚úÖ Monitoramento em tempo real de Dark Web</li>
                        <li>‚úÖ Acesso a 10+ bancos de dados de breach</li>
                        <li>‚úÖ Rastreamento de criptomoedas (Bitcoin, Ethereum, etc)</li>
                        <li>‚úÖ Banco de dados de reconhecimento facial</li>
                        <li>‚úÖ An√°lise avan√ßada de padr√µes de email</li>
                        <li>‚úÖ Acesso √† API (1000 requisi√ß√µes/m√™s)</li>
                        <li>‚úÖ Hist√≥rico de busca ilimitado</li>
                        <li>‚úÖ Exportar relat√≥rios (PDF, JSON, CSV)</li>
                        <li>‚úÖ Suporte priorit√°rio via WhatsApp</li>
                        <li>‚úÖ Integra√ß√µes customizadas</li>
                    </ul>
                    <br>
                    <p><strong>Recursos Enterprise (Customizado):</strong></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>üîπ Gerenciamento de equipe</li>
                        <li>üîπ Op√ß√µes de white-label</li>
                        <li>üîπ Deployment customizado</li>
                        <li>üîπ Garantias de SLA</li>
                        <li>üîπ Treinamento e consultoria</li>
                    </ul>
                    <br>
                    <p style="text-align: center; margin-top: 30px;">
                        <a href="https://wa.me/5577998731012" class="btn" style="display: inline-block; text-decoration: none;">üí¨ Assinar via WhatsApp</a>
                    </p>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <h3>InfoHub OSINT Professional</h3>
            <div class="social-links">
                <a href="https://github.com/infohub-osint" class="social-link" title="GitHub">üêô</a>
                <a href="https://twitter.com/infohub_osint" class="social-link" title="Twitter">ùïè</a>
                <a href="https://linkedin.com/company/infohub-osint" class="social-link" title="LinkedIn">üíº</a>
                <a href="https://t.me/InfoHubOSINTBot" class="social-link" title="Telegram">‚úàÔ∏è</a>
                <a href="https://wa.me/5577998731012" class="social-link" title="WhatsApp">üí¨</a>
                <a href="https://discord.gg/infohub-osint" class="social-link" title="Discord">üéÆ</a>
            </div>
            <div class="footer-text">
                <p>üìû WhatsApp: +55 (77) 99873-1012</p>
                <p>üìß Email: support@infohub-osint.com</p>
                <p style="margin-top: 20px;">¬© 2024 InfoHub OSINT. Todos os direitos reservados.</p>
                <p style="font-size: 12px; margin-top: 10px;">Use responsavelmente. Respeite a privacidade. Siga a lei.</p>
            </div>
        </div>
    </footer>

    <script>
        let currentScanType = 'auto';
        let scanHistory = JSON.parse(localStorage.getItem('scanHistory') || '[]');
        let isScanning = false;

        // DOM Content Loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            updateStats();
        });

        function initializeApp() {
            // Scan type buttons
            const scanBtns = document.querySelectorAll('.scan-btn');
            scanBtns.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    if (isScanning) return;
                    
                    scanBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentScanType = this.dataset.type;
                });
            });

            // Search input
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' && !isScanning) {
                        startScan();
                    }
                });
                
                // Input validation
                searchInput.addEventListener('input', function(e) {
                    const value = e.target.value;
                    if (value.length > 100) {
                        e.target.value = value.substring(0, 100);
                    }
                });
            }

            // Navigation buttons
            document.getElementById('navDashboard').addEventListener('click', showDashboard);
            document.getElementById('navAbout').addEventListener('click', showAbout);
            document.getElementById('navPremium').addEventListener('click', showPremium);

            // Action buttons
            const clearHistoryBtn = document.getElementById('clearHistoryBtn');
            if(clearHistoryBtn) {
                clearHistoryBtn.addEventListener('click', clearHistory);
            }
            const exportResultsBtn = document.getElementById('exportResultsBtn');
            if(exportResultsBtn) {
                exportResultsBtn.addEventListener('click', exportResults);
            }
        }

        // Navigation functions
        function showDashboard() {
            hideAllSections();
            document.getElementById('dashboard').style.display = 'block';
        }

        function showAbout() {
            hideAllSections();
            document.getElementById('about').style.display = 'block';
        }

        function showPremium() {
            hideAllSections();
            document.getElementById('premium').style.display = 'block';
        }

        function hideAllSections() {
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('about').style.display = 'none';
            document.getElementById('premium').style.display = 'none';
        }

        // Input validation
        function validateInput(input) {
            if (!input || typeof input !== 'string') return false;
            const trimmed = input.trim();
            if (trimmed.length < 2) return 'Entrada muito curta (m√≠nimo 2 caracteres)';
            if (trimmed.length > 100) return 'Entrada muito longa (m√°ximo 100 caracteres)';
            if (!/^[a-zA-Z0-9@._\-+\s()]+$/.test(trimmed)) return 'Caracteres inv√°lidos detectados';
            return true;
        }

        // Sanitize HTML output
        function sanitizeHTML(str) {
            const div = document.createElement('div');
            div.textContent = str;
            return div.innerHTML;
        }

        // Main scan function
        async function startScan() {
            if (isScanning) return;
            
            const target = document.getElementById('searchInput').value.trim();
            const validation = validateInput(target);
            
            if (validation !== true) {
                showError(validation);
                return;
            }

            isScanning = true;
            showLoading();
            
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 30000);
                
                const response = await fetch('/api/search', {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({ 
                        query: target, 
                        type: currentScanType 
                    }),
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const result = await response.json();
                
                if (result.error) {
                    showError(result.error);
                } else if (result.results && Array.isArray(result.results)) {
                    displayResults(result);
                    addToHistory(target, result.results);
                    updateStats();
                } else {
                    showError('Resposta inv√°lida do servidor');
                }
                
            } catch (error) {
                if (error.name === 'AbortError') {
                    showError('Timeout: Opera√ß√£o cancelada ap√≥s 30 segundos');
                } else if (error.message.includes('Failed to fetch')) {
                    showError('Erro de conex√£o: Verifique sua internet');
                } else {
                    showError('Erro: ' + error.message);
                }
            } finally {
                isScanning = false;
            }
        }

        function showLoading() {
            const container = document.getElementById('resultsContainer');
            const results = document.getElementById('scanResults');
            results.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <div>Escaneando alvo...</div>
                    <div style="font-size: 12px; margin-top: 10px; color: #888;">Isso pode levar alguns segundos</div>
                </div>
            `;
            container.style.display = 'block';
        }

        function displayResults(data) {
            const results = document.getElementById('scanResults');
            
            // Summary
            let html = `
                <div class="result-item">
                    <div class="result-header">
                        <div class="result-title">üìä Resumo da An√°lise</div>
                        <div class="result-status status-success">Conclu√≠do</div>
                    </div>
                    <div class="result-data">
                        <strong>Alvo:</strong> ${sanitizeHTML(data.query)}<br>
                        <strong>Tipo:</strong> ${sanitizeHTML(data.type)}<br>
                        <strong>Resultados:</strong> ${data.results.length}<br>
                        <strong>Timestamp:</strong> ${new Date(data.timestamp).toLocaleString('pt-BR')}
                    </div>
                </div>
            `;

            // Results
            data.results.forEach(result => {
                const statusClass = result.status === 'success' ? 'success' : 
                                  result.status === 'error' ? 'error' : 'warning';
                const statusIcon = result.status === 'success' ? '‚úÖ' : 
                                 result.status === 'error' ? '‚ùå' : '‚ö†Ô∏è';
                
                html += `
                    <div class="result-item">
                        <div class="result-header">
                            <div class="result-title">${statusIcon} ${sanitizeHTML(result.platform)}</div>
                            <div class="result-status status-${statusClass}">${sanitizeHTML(result.status)}</div>
                        </div>
                        <div class="result-data">
                            ${sanitizeHTML(result.data || 'N/A')}
                            ${result.url ? `<br><a href="${sanitizeHTML(result.url)}" target="_blank" rel="noopener noreferrer" style="color: #00d9ff;">üîó Ver Perfil</a>` : ''}
                        </div>
                    </div>
                `;
            });

            results.innerHTML = html;
        }

        function showError(message) {
            const results = document.getElementById('scanResults');
            const container = document.getElementById('resultsContainer');
            
            results.innerHTML = `
                <div class="result-item">
                    <div class="result-header">
                        <div class="result-title">‚ùå Erro</div>
                        <div class="result-status status-error">Falhou</div>
                    </div>
                    <div class="result-data">
                        ${sanitizeHTML(message)}
                        <br><br>
                        <small style="color: #888;">Tente novamente ou verifique sua entrada</small>
                    </div>
                </div>
            `;
            
            container.style.display = 'block';
        }

        function addToHistory(target, results) {
            const historyItem = {
                target: target,
                timestamp: new Date().toISOString(),
                findings: results.length,
                type: currentScanType,
                success: results.filter(r => r.status === 'success').length
            };
            
            scanHistory.unshift(historyItem);
            
            // Keep only last 50 scans
            if (scanHistory.length > 50) {
                scanHistory = scanHistory.slice(0, 50);
            }
            
            // Save to localStorage
            try {
                localStorage.setItem('scanHistory', JSON.stringify(scanHistory));
            } catch (e) {
                console.warn('Could not save to localStorage:', e);
            }
        }

        function updateStats() {
            const totalScans = scanHistory.length;
            const uniqueTargets = new Set(scanHistory.map(s => s.target)).size;
            const totalFindings = scanHistory.reduce((sum, scan) => sum + scan.findings, 0);
            
            document.getElementById('totalScans').textContent = totalScans;
            document.getElementById('activeTargets').textContent = uniqueTargets;
            document.getElementById('findings').textContent = totalFindings;
        }

        // Clear history function
        function clearHistory() {
            if (confirm('Tem certeza que deseja limpar o hist√≥rico?')) {
                scanHistory = [];
                localStorage.removeItem('scanHistory');
                updateStats();
            }
        }

        // Export results function
        function exportResults() {
            if (scanHistory.length === 0) {
                alert('Nenhum resultado para exportar');
                return;
            }
            
            const data = JSON.stringify(scanHistory, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `infohub-osint-results-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>